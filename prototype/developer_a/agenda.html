<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedixAi - Agenda</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="sidebar">
        <div class="logo">MedixAi</div>
        <ul class="nav-links">
            <li><a href="dashboard.html">üìä Panel Principal</a></li>
            <li><a href="agenda.html" class="active">üìÖ Agenda & Citas</a></li>
            <li><a href="#">ü©∫ Pacientes</a></li>
            <li><a href="#">‚öôÔ∏è Configuraci√≥n</a></li>
        </ul>
    </div>

    <div class="main-content">
        <div class="header">
            <h1>Gesti√≥n de Agenda</h1>
            <div>
                <button class="btn" onclick="toggleBlockMode()">üö´ Bloquear Horario</button>
            </div>
        </div>

        <div class="calendar-controls">
            <button class="view-btn">Mes</button>
            <button class="view-btn active">Semana</button>
            <button class="view-btn">D√≠a</button>
            <span style="display: flex; align-items: center; margin-left: auto; font-weight: bold;">
                <button style="border:none; background:none; cursor:pointer; font-size:1.2rem; margin-right:1rem;">‚óÄ</button>
                Semana 27 Feb - 05 Mar
                <button style="border:none; background:none; cursor:pointer; font-size:1.2rem; margin-left:1rem;">‚ñ∂</button>
            </span>
        </div>

        <div id="calendar-container" class="calendar-grid">
            <!-- Headers -->
            <div class="calendar-header">
                <div class="header-cell">Hora</div>
                <div class="header-cell">Lun 27</div>
                <div class="header-cell">Mar 28</div>
                <div class="header-cell">Mie 01</div>
                <div class="header-cell">Jue 02</div>
                <div class="header-cell">Vie 03</div>
                <div class="header-cell">Sab 04</div>
                <div class="header-cell">Dom 05</div>
            </div>

            <!-- Time Slots generated by JS -->
            <div id="time-slots"></div>
        </div>
    </div>

    <script>
        const container = document.getElementById('time-slots');
        const hours = ['08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00'];
        
        let blockMode = false;

        function toggleBlockMode() {
            blockMode = !blockMode;
            const btn = document.querySelector('button[onclick="toggleBlockMode()"]');
            if(blockMode) {
                btn.style.backgroundColor = 'var(--danger-color)';
                btn.innerText = "Terminar Bloqueo";
                alert("Modo Bloqueo Activado: Haz clic en las celdas para bloquear/desbloquear horarios.");
            } else {
                btn.style.backgroundColor = 'var(--primary-color)';
                btn.innerText = "üö´ Bloquear Horario";
            }
        }

        hours.forEach(hour => {
            const row = document.createElement('div');
            row.className = 'time-slot-row';
            
            // Time Label
            const timeLabel = document.createElement('div');
            timeLabel.className = 'time-label';
            timeLabel.innerText = hour;
            row.appendChild(timeLabel);

            // 7 Days Columns
            for(let i=0; i<7; i++) {
                const daySlot = document.createElement('div');
                daySlot.className = 'day-slot';
                
                // Add click event for blocking
                daySlot.onclick = function() {
                    if(blockMode) {
                        this.classList.toggle('blocked');
                    }
                };

                // Simulator Data: Example appointment on Wednesday at 10:00
                if(i === 2 && hour === '10:00') {
                    const appt = document.createElement('div');
                    appt.className = 'appointment';
                    appt.innerText = 'Carlos Ruiz - Consulta';
                    appt.onclick = (e) => {
                        e.stopPropagation();
                        alert('Detalles de cita: Carlos Ruiz');
                    };
                    daySlot.appendChild(appt);
                }

                 // Simulator Data: Example blocked slot manually
                 if(i === 4 && hour === '14:00') {
                    daySlot.classList.add('blocked');
                }

                row.appendChild(daySlot);
            }
            container.appendChild(row);
        });
    </script>
</body>
</html>
